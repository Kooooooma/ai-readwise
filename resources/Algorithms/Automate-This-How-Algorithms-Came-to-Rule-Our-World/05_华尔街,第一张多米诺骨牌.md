# 华尔街,第一张多米诺骨牌

**1** 987年年初的一天,纳斯达克交易所的一位工作人员出现在世贸中心的电梯间,我们就叫他琼斯吧。他找到合适的电梯,按下按钮。他是来例行拜访一位快速增长的客户。琼斯知道接下来见到的人是什么样儿,华尔街从事股权交易的人都大同小异:拥有常春藤名校教育背景、追逐利润的白人男性,没什么特别的。

他穿过走廊,来到办公区门前,沉住气并打起精神,做好了准备迎接里面的躁动和兴奋。交易所和电视上播出的抓钱游戏节目是一样的,一个人被塞进玻璃箱里,大把的钱从天而降。不过有一点不同,交易所漫天飞舞的交易单中有一些是赔钱的。而敏捷熟练的交易员能够快速交易,并飞快地分辨出哪些是赔钱的交易,哪些是可以赚钱的。

公司前台接待了琼斯,然后走进房间去请主人。她带来一位矮个子、满头银发、衣着整洁的男人。他叫托马斯·彼得菲,有着一双蓝色的眼睛,说话带着口

音。他非常欢迎琼斯的到来。

琼斯不会想到,彼得菲后来会成为身价超过50亿的富翁,美国最有钱的人之一。他那时还只不过是华尔街的暴发户。但他的交易量却不断上升,利润也不断扩增。琼斯一直很好奇彼得菲这样的人为什么能从市场中持续稳定获利。他雇用了最聪明的人吗?他有强大的研究部门吗?他是在冒大险、行大运吗?

琼斯不知道的是,彼得菲根本就不是一名交易商,而是一名计算机程序员。 他做交易靠的不是观察交易厅里人们的表情,预测市场的动向或经济趋势怎样影响股票走势,他靠的是写代码。他用各种计算机语言(如Fortran、C、Lisp)写出了成千上万行代码,它们构建的算法成就了他的交易所,虽然规模不大,但已是华尔街上最优秀的。他本人已经是华尔街新生代的领袖。

彼得菲带琼斯走进交易厅,琼斯迷惑不已。他看见的越多(其实没多少可看的),就越困惑。他预想的是骚动的人群、吵闹的电话声、打印机的声音,还有交易员向纳斯达克交易终端输入交易指令时此起彼伏的叫买叫卖声。可这场景并未出现在他眼前。实际上,他只看见一台纳斯达克交易终端。他潸楚彼得菲的交易量有多大,可是这怎么可能呢?谁是做交易的人呢?

"其他交易场所在哪儿呢?"琼斯问,"你的交易员呢?"

"那就是,全都在这儿呢。"彼得菲指向房间里唯一的纳斯达克交易终端旁边的IBM电脑说,"我们的交易都是用它完成的。"交易终端和IBM电脑之间有一团连接线,电脑里装有指示交易品种、交易时间和交易数量的代码。这位纳斯达克职员没有想到,他刚刚见到的是世界上第一台全自动算法交易系统。彼得菲的设备可不只是像过去的交易系统那样提示交易品种,也不仅是简单地弹出需要人来执行的交易单。这台电脑悄悄潜入纳斯达克交易终端,全权决定并执行交易,不

需要人的参与。虽然它的对手是人,但他们却都被打得一败涂地。

从纳斯达克终端得到的交易数据不断涌来,彼得菲的代码可以利用这些数据分析市场,轻易通过买家出价和卖家售价的不同来开出买单和卖单。这种价格上的不同成为交易差价,那时候纳斯达克交易市场差价每股可达25美分,那么进行一对1000股的交易(比如在S19.75价位开出买单,在\$20.00价位开出卖单),就可以无风险获利250美元。

对彼得非来说,他利用机器执行交易,风险成本可以更低。那时候交易员频 繁开出挂单0,他们面临的最大风险就是在经历一波市场动荡后,仍然可以将原来的挂单高高挂起。大多数做市场交易的人对市场的反应速度只能和交易员一样, 交易员必须不断地从电脑屏幕读取新的报价,研究报价信息,重新制订交易计划, 撤销老订单,再用纳斯达克终端键盘输入新的报价。交易员要是多吃了几口金枪 鱼三明治,或是和同事开了句玩笑,就有可能被交易市场甩在身后了。彼得菲的 电脑是不需要吃午餐的,它能紧紧咬住交易市场的波动起伏,大大降低风险,这可是人做不到的事情。

彼得菲的交易机构开启了华尔街的新篇章。从此,电脑程序员、工程师和数学家开始了对金融市场长达20年的大举进攻,所使用的利器就是算法和自动化交易,算法有时无比复杂精密,几乎智能化到可以取代人成为金融市场的决定性力量。

琼斯惊得目瞪口呆。彼得菲把这一切看做是创新的交易方式, 琼斯却认为他 用临时配置的终端作弊, 违反了交易规则。

① 证券市场电子化交易中,挂单一词等同于委托,即投资者决定买卖股票时通过电话、电脑等形式向交易系统发出的买卖股票的指令。——编者注

"你不能这么做。"琼斯说。

纳斯达克没有交易场所,所有交易都是通过电话或是电脑完成的。电脑网络接收从独立的纳斯达克交易终端的键盘上传来的交易指令。彼得菲整合了本应该连接到交易终端的数据线,将它连接到他的程序员和物理学家团队自制的嵌入IBM个人电脑主板的一块电路板上。IBM电脑运行的是彼得菲自己编写的软件程序。电脑通过纳斯达克的数据线获取信息,利用算法分析市场,迅速做出交易决定,然后将交易单通过一团连接线再传回纳斯达克终端的内部。在此之前,无人知晓彼得菲已然人侵了纳斯达克。

纳斯达克是不会让这奇妙精巧的设计和疯子科学家的实验室被市场参与者知晓的。其他交易者要是知道他们是在和IBM电脑所运行的算法斗智,而不是和市场上那些凭直觉下注的赌博者博弈,心里会舒服吗?纳斯达克不想知道答案。

"交易终端和IBM电脑的连接必须切断,你得像其他交易者那样,通过键盘一条一条地输入交易指令。"琼斯说。

琼斯离开了。彼得菲站在办公室里,想到这样也许会终结自己的事业。纳斯 达克给了他一周的改正时间,其交易必须符合监督员的要求。一想到要拆掉自己 的交易机器,他就痛苦不已。要去招聘交易员整天坐在电脑前输入交易指令,他 对这想法可没有丝毫兴趣,哪怕能招来年轻又廉价的交易员。他花了好几年的时 间才让自己的交易机构摆脱了人力交易的缺陷,摆脱了人的反复无常、一时兴起。 人难免会出错误、懒惰、开小差,关键是输入交易指令有延迟,因此重新使用人 力很难达到等同于机器自动化交易的效果,交易机构的高效会在一夜之间丧失。 必须有一个更好的解决方案。

晚上他回到上东区的住所准备睡觉,脑海中忽然浮现出一个解决方案。这个

方案行之不易,但却有可能解决问题。彼得非想,即使不用交易终端,他也能从中捕获信息。不用拼接连接线,不用嵌入电路板,什么都不用。但怎样实现呢? 他询问了自己的工程师,是否能够造出某种设备从屏幕直接读取信息,就像照相 机那样,然后将这些信息转化成电子字符,传送到等候指令的IBM电脑里。答案 是能。

但是解决数据来源的问题仅仅是个开头,由于没有任何人坐在纳斯达克终端前,彼得菲要怎样完成交易呢? 他不能像之前那样把一根传输线连接在纳斯达克终端上。不行,纳斯达克明确规定了交易指令必须得通过键盘输入。彼得菲灵光一闪,有了一个疯狂的念头。

在接下来疯狂的一周里,彼得菲和他最好的工程师忙着焊接金属、编写代码、焊接数据线。他们在纳斯达克终端屏幕前安装了一个大型菲涅耳透镜,放大屏幕字体。又在离透镜一英尺远的地方安装了一部相机。从照相机牵出一根数据线连接到旁边的一台电脑上。彼得菲和他的程序员仅用了几天时间就编写出了一套软件,可以解码照相机传来的可视化数据。那些数据从特定程序软件流到彼得菲已经做好的算法里,就是那些曾经通过数据线和纳斯达克终端直接相连的算法。

现在IBM电脑有了一根新的连接线,它不是接入到纳斯达克终端机箱,而是连接到了悬在终端键盘上空的那一堆密密麻麻的金属棒、金属塞和手柄上。如果说照相机和读屏设备略显奇怪,那么彼得菲设计出的这部分悬空的系统就是怪异得超乎寻常了。它让人想起工业大革命之初复杂精细的机械设备。这个装置是一个从零组装的自动化打字机。手柄断断续续敲打着键盘,执行从电脑传来的交易指令,不到30秒就有几十个交易单输入终端。

纳斯达克说交易单必须得有输入终端,可也没有规定谁来完成输入。彼得非 的团队花了六天时间创造了一种输入交易和指令的半机器人。表面上看,他遵守 了法律,但实际上却违反了法律的本质。可彼得菲并不担心。华尔街不就是一个 法律擦边球、变通方案和秘密交易无处不在的地方吗?而且总是青睐那些最有创 造力的骗子。

纳斯达克监督员琼斯一周后如约而至。彼得菲在电梯间见到他,带他穿过走廊,来到交易厅。门哐当一响,一周以前鸦雀无声的交易厅,现在是一派喧闹繁忙,这才是交易厅该有的样子嘛。彼得菲带琼斯穿过大门,骄傲地指向自己的创作。这位纳斯达克职员仿佛置身于儒勒·凡尔纳笔下的科幻小说所描述的场景。

"这是什么?"琼斯问。

彼得菲解释他的交易机器如纳斯达克要求的那样运作——键盘输入,一次一单。就在这时候,交易市场活跃起来了,机器也跟着忙碌起来。彼得菲的程序交易速度如此之快,输入设备就像一把全自动机关枪不停开火。交易单不断涌入,手柄噼里啪啦打在键盘上,噪声如此之大,甚至淹没了谈话声。机器每次停下来,仿佛要安静一会儿,谁知转瞬之间再次启动,更加气势汹汹地弹出比上次还要多的单子。这整个交易是华尔街的聪明人对规则的又一次令人叹为观止的绕行。

"他可不太喜欢这个机器。"彼得菲回想道。

彼得菲觉得这没什么大不了的,他还提出在这奇异装置前弄个洋娃娃模型来 

琼斯摇摇头,彼得菲扮了个鬼脸。他造出了世界上运行速度最快的交易机器,他也预料到这个交易机器可能面临被拆卸的命运。这位纳斯达克职员沉思了几分钟,然后一言不发地走出了彼得菲的办公室。彼得菲做了最坏的打算,那就是纳斯达克禁止他的发明参与交易。但是琼斯没有再回来,而且彼得菲担心的那个电话也没有打来。他的交易所完好无损。彼得菲几年前不到10万美元起家,在1987

年赚到了5000万美元。

1987年,彼得菲在华尔街还只是个无足轻重的小人物,但他却是新生代交易商的领袖之一。这些人擅长编写复杂的代码、焊接半导体芯片,并运用数学知识探索迷宫般的市场结构。彼得菲所做的事情理论上简单易懂,操作起来却复杂烦琐:他吸取了最聪明的交易员的智慧,用一系列的算法表达他们的思想。彼得菲的程序包含了一个高明的交易员在决策时所要考虑到的全部因素。不同之处在于电脑运行算法、核实价格、执行交易所用的时间要远远少于人为操作。

使用软件、代码和高速运行的电脑来击败市场的人不止彼得非一个。但彼得菲的发明(不管是敲打键盘的金属塞还是窃取数据的传输线)引发了一场革命。 今天,60%的交易由电脑在无人实时监管或很少监管的情况下自动执行。彼得菲 在华尔街演绎的故事是独一无二的。他不是有先见之明雇用程序员来扩充自己统 治领域的金融大亨,也不是自学编程期待在金融市场获得优势的华尔街玩家。他 与众不同的地方在于他是个程序员,一个优秀的程序员。早在他理解股票期权的 原理,理解为何不同公司的股票会走势一致之前,他就是一个程序员。

就这样,彼得菲用自己的编程技能、数学知识和编写复杂代码的能力,创造出了分层算法,从而颠覆了一个对他而言很陌生的领域:华尔街交易所。这种颠覆性的黑客范式在20世纪末风行于世界各地,并开启了21世纪:先是一个技术熟练的电脑代码和算法工程师对某一新的领域产生了兴趣,培养自身在该领域的技能,然后应用计算机科学,让代码片段模仿前人的操作,并战胜了无数的公司,破坏了行业标准,击败了行业的老旧势力,从而颠覆了整个行业。构建算法模仿、超越并最终取代人类,是21世纪最重要的能力。由于具有这种能力的人剧增,工作会逐渐消失,生活会发生巨变,各行各业都会重建规则。这已经发生了,这种趋势还会延续。这一趋势也如历史上的其他趋势一样追逐利益。这也就是为什么

它始于华尔街,很大程度上要归功于这位匈牙利移民。

## 黑客成长的艰难道路

在这30年来算法逐步入侵人类生活的故事中,托马斯·彼得菲或许是最为重要的人物之一,但他并不是出生在一个科技发达的时代,而是在人类历史上最残酷的战争时代。彼得菲于1944年苏联红军攻占布达佩斯的战火中出生在当地一家医院的地下室。他的父亲在第二次世界大战后踏上逃亡之路,他是由母亲和祖父母养大的。他童年的记忆就是恐惧,亲人失散、深夜迁徙、流离失所、饥寒交迫,比这更糟的他都经历过。

彼得菲在上高中的时候就领会了资本的意义。他把走私来的一条条果汁口香糖以高于成本价500%的价格卖给学生。13岁的时候,他组织三五成群的伙伴在废弃楼和瓦砾堆里搜寻金属,和比自己年龄大三四倍的人讨价还价,以最优的价格卖出他的废铜烂铁,和伙伴们分摊收益。后来他又勤勤恳恳做起了邮票买卖交易。在黑市上,邮票在某些地方卖得贵,而在另一些地方则便宜些,这让彼得菲兴奋不已。他发现了利用同一种商品的价格差在资产市场套利的妙处。套利者低买高卖的策略是很多现代化高效率的交易所的支柱,当然交易所要以更快的形式执行这一策略。

被得非高中毕业后在一所培养测量员的技校学习高等几何,为上大学、取得 土木工程的学位做准备。但在他21岁的时候,他的教育轨迹发生了偏离。那是1965 年,他获得了去西德拜访远亲的短期签证。他利用这次机会在西德申请美国移民 许可,最终申请获批。登上飞往纽约的航班时,这个匈牙利年轻人还不知道华尔 街,更别提他用来征服华尔街的计算机和算法了。 他在上东区找到一间两室公寓,同住者是一个因贪图酒色被教会驱逐的修道士。修道士一度带彼得菲做起了他的行当——匈牙利移民的非官方公证人。彼得非在纽约认识了越来越多的匈牙利移民,最终通过他们的帮助找到了新的住所,并在一家土木工程公司找到了一份公路设计绘图员的工作。

20世纪60年代中期,小型企业刚刚开始用上计算机。大批盒子一样的机器涌入用心良苦的企业主办公室,他们想利用计算机为企业增加客户群、提高效率。但计算机的隆重到来却遭遇了窘境,因为没有人懂得用程序指令运行它。很多买家尴尬地发现,尽管大家都非常看好计算机,实际操作起来却相当困难。因此,在这个时代企业主们所购置的计算机大都因长年累月不用积了灰,被扔到了杂物间去。

彼得菲的公司在1966年购进了第一台电脑,当时这家土木公司的员工没一个人知道怎么使用它。后来彼得菲毛遂自荐,他仔细研究了英文说明书,开始学习编写代码。他运用勾股定理创建了简单的算法,有些利用正余弦函数来求角,有些帮助工程师规定弯道的半径和斜率。1966年年末,彼得菲已为公司建造了一个程序库,并获得周薪65美元。对他来说,学习编程比学说英语简单。他是那样出类拔萃。

20世纪60年代末期,优秀的程序员可不缺工作,现在也是如此。编程为彼得 菲指明了一条通往财富和更好工作的道路。1967年,他的第一次机会来了,他离 开了土木公司,在一家帮助华尔街客户建立计算机系统的咨询公司Aranyi Associates 谋得一职。这个工作也是靠老乡的关系,公司老板是匈牙利移民雅诺斯·奥劳尼。

当时的华尔街正处在算法交易的酝酿阶段。也就是说,那个时代,算法机器 在人们的日常生活中或是华尔街都没有用处,那还是一个由人自己来执行人为的 决定和策略的世界。在华尔街,交易员基于他对市场走势的判断、已经持有的股 票量做出决策,大多数情况仅仅是凭不确定的直觉。他发出交易信号给另一个人, 后者在笔记本上记录交易。这就是华尔街。

第一次从事金融业工作,彼得菲构建了一种方便投资者和交易者一次性同时 比较证券不同特性和价值的算法。作为一个无依无靠的移民,彼得菲攻破了自己 所专注的领域,并取得巨大成就。他自学成才,成为一名令人钦佩的程序员。那 个时代程序员还很少,在华尔街几乎没有。

在Aranyi工作三年后,彼得菲的电脑技术使他得到了一份工作机会,这个工作非常有趣,来自一个叫亨利·杰里克的人,他是纽约市场最有名的玩家之一。杰里克原来是精神病医师,后来对商品交易产生了浓厚的兴趣,于20世纪60年代创建了从事大型贵金属交易的莫卡塔集团,公司名字源于杰里克原来的合作伙伴,一家具有300年历史的伦敦金行Mocatta & Goldsmid。©杰里克给彼得菲开出的起薪是2万美元外加4千美元奖金,大约相当于2012年的14.5万美元。对于一个几年前还和一个被驱逐的修道士同住一间没有暖气的公寓的人来说,这可是一大笔钱啊。彼得菲对贵金属市场有很好的盘感,并且由于自己的编程技术对公司越发重要,所以他在莫卡塔晋升得很快。
